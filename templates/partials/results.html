{% set ns = namespace(total_count=0) %} {% for result in results %} {% set
ns.total_count = ns.total_count + result.rows|length %} {% endfor %}

<div class="flex flex-col w-full space-y-4 p-4">
  <!--Error card-->
  {%if error %}
  <div class="flex justify-center mt-6">
    <div class="alert-destructive w-1/2 items-bottom p4">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="10" />
        <line x1="15" y1="9" x2="9" y2="15" />
        <line x1="9" y1="9" x2="15" y2="15" />
      </svg>
      <h2>An issue occured with your search</h2>
      <section>
        Please refer to the documentation on the query syntax or update your
        config to include the query in the allowed fields
      </section>
    </div>
  </div>
  {% endif %}

  <!-- Results count card -->
  <section class="card p-4 text-center w-full shadow-none">
    <header class="font-medium">
      Breach-Hog found that the searched entity appears in
      <b>{{ ns.total_count }}</b>
      {% if ns.total_count == 1 %} breach {% else %} breaches {% endif %} in the
      current database
    </header>
  </section>

  {% if results and results|length > 0 %}
  <h2 class="font-bold mb-5 text-center justify-center">Results</h2>

  <!-- Raw results -->
  {% for result in results %}
  <section class="card mb-6 w-full">
    <header>
      <h2 class="text-lg font-bold mb-2">{{ result.table }}</h2>
    </header>

    <div class="space-y-3">
      {% for row in result.rows %}
      <div class="p-4 break-words font-mono rounded shadow w-full">
        {% for key, value in row.items() %}
        <div class="grid grid-cols-[auto_1fr] gap-x-4 gap-y-1">
          <span class="font-semibold">{{ key }}:</span>
          <span class="break-words">{{ value }}</span>
        </div>
        {% endfor %}
      </div>
      {% endfor %}
    </div>
  </section>
  {% endfor %} {% else %}
  <div class="mt-4 text-center">No results found.</div>
  {% endif %}
</div>
